box: golang

build:

  steps:

    - setup-go-workspace

    - script:
        name: build
        code: |
          make build

    - script:
        name: run tests
        code: |
          make testacc

    - yieldr/test-reporter:
        id: $CODECLIMATE_REPO_TOKEN

release:
  # Running this workflow will result in errors unless a git tag matches the
  # current commit.
  steps:

  - script:
      name: release
      code: |
        curl -sL https://git.io/goreleaser | bash
